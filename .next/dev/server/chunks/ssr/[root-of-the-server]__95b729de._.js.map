{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///D:/Corominas-Seo-Reporting-System/lib/db/datasources.ts"],"sourcesContent":["import { createClient } from \"@/lib/supabase/server\"\r\nimport type { Datasource, MangoolsDomain } from \"@/lib/supabase/types\"\r\nimport { cache } from \"react\"\r\n\r\n/**\r\n * Get all datasources for a customer\r\n */\r\nexport const getDatasources = cache(async (customerId: string): Promise<Datasource[]> => {\r\n  const supabase = await createClient()\r\n  const { data, error } = await supabase\r\n    .from(\"datasources\")\r\n    .select(\"*\")\r\n    .eq(\"customer_id\", customerId)\r\n    .eq(\"is_active\", true)\r\n    .order(\"created_at\", { ascending: false })\r\n\r\n  if (error) {\r\n    console.error(\"Failed to fetch datasources:\", error)\r\n    throw new Error(`Failed to fetch datasources: ${error.message}`)\r\n  }\r\n  return data || []\r\n})\r\n\r\n/**\r\n * Get a single datasource by ID\r\n */\r\nexport const getDatasource = cache(async (id: string): Promise<Datasource | null> => {\r\n  const supabase = await createClient()\r\n  const { data, error } = await supabase.from(\"datasources\").select(\"*\").eq(\"id\", id).single()\r\n\r\n  if (error && error.code !== \"PGRST116\") {\r\n    console.error(\"Failed to fetch datasource:\", error)\r\n    throw new Error(`Failed to fetch datasource: ${error.message}`)\r\n  }\r\n  return data || null\r\n})\r\n\r\n/**\r\n * Get Mangools domains for a datasource\r\n */\r\nexport const getMangoolsDomains = cache(async (datasourceId: string): Promise<MangoolsDomain[]> => {\r\n  const supabase = await createClient()\r\n  const { data, error } = await supabase\r\n    .from(\"mangools_domains\")\r\n    .select(\"*\")\r\n    .eq(\"datasource_id\", datasourceId)\r\n    .eq(\"is_active\", true)\r\n    .order(\"domain\", { ascending: true })\r\n\r\n  if (error) {\r\n    console.error(\"Failed to fetch Mangools domains:\", error)\r\n    throw new Error(`Failed to fetch Mangools domains: ${error.message}`)\r\n  }\r\n  return data || []\r\n})\r\n\r\n/**\r\n * Get all domains for a customer (across all datasources)\r\n */\r\nexport const getCustomerDomains = cache(async (customerId: string): Promise<MangoolsDomain[]> => {\r\n  const supabase = await createClient()\r\n  \r\n  // Join datasources and mangools_domains\r\n  const { data, error } = await supabase\r\n    .from(\"mangools_domains\")\r\n    .select(`\r\n      *,\r\n      datasources!inner(customer_id, name)\r\n    `)\r\n    .eq(\"datasources.customer_id\", customerId)\r\n    .eq(\"is_active\", true)\r\n\r\n  if (error) {\r\n    console.error(\"Failed to fetch customer domains:\", error)\r\n    throw new Error(`Failed to fetch customer domains: ${error.message}`)\r\n  }\r\n  return data || []\r\n})\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AAEA;;;AAKO,MAAM,iBAAiB,IAAA,8MAAK,EAAC,OAAO;IACzC,MAAM,WAAW,MAAM,IAAA,yIAAY;IACnC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,eACL,MAAM,CAAC,KACP,EAAE,CAAC,eAAe,YAClB,EAAE,CAAC,aAAa,MAChB,KAAK,CAAC,cAAc;QAAE,WAAW;IAAM;IAE1C,IAAI,OAAO;QACT,QAAQ,KAAK,CAAC,gCAAgC;QAC9C,MAAM,IAAI,MAAM,CAAC,6BAA6B,EAAE,MAAM,OAAO,EAAE;IACjE;IACA,OAAO,QAAQ,EAAE;AACnB;AAKO,MAAM,gBAAgB,IAAA,8MAAK,EAAC,OAAO;IACxC,MAAM,WAAW,MAAM,IAAA,yIAAY;IACnC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,eAAe,MAAM,CAAC,KAAK,EAAE,CAAC,MAAM,IAAI,MAAM;IAE1F,IAAI,SAAS,MAAM,IAAI,KAAK,YAAY;QACtC,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,MAAM,IAAI,MAAM,CAAC,4BAA4B,EAAE,MAAM,OAAO,EAAE;IAChE;IACA,OAAO,QAAQ;AACjB;AAKO,MAAM,qBAAqB,IAAA,8MAAK,EAAC,OAAO;IAC7C,MAAM,WAAW,MAAM,IAAA,yIAAY;IACnC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,oBACL,MAAM,CAAC,KACP,EAAE,CAAC,iBAAiB,cACpB,EAAE,CAAC,aAAa,MAChB,KAAK,CAAC,UAAU;QAAE,WAAW;IAAK;IAErC,IAAI,OAAO;QACT,QAAQ,KAAK,CAAC,qCAAqC;QACnD,MAAM,IAAI,MAAM,CAAC,kCAAkC,EAAE,MAAM,OAAO,EAAE;IACtE;IACA,OAAO,QAAQ,EAAE;AACnB;AAKO,MAAM,qBAAqB,IAAA,8MAAK,EAAC,OAAO;IAC7C,MAAM,WAAW,MAAM,IAAA,yIAAY;IAEnC,wCAAwC;IACxC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,oBACL,MAAM,CAAC,CAAC;;;IAGT,CAAC,EACA,EAAE,CAAC,2BAA2B,YAC9B,EAAE,CAAC,aAAa;IAEnB,IAAI,OAAO;QACT,QAAQ,KAAK,CAAC,qCAAqC;QACnD,MAAM,IAAI,MAAM,CAAC,kCAAkC,EAAE,MAAM,OAAO,EAAE;IACtE;IACA,OAAO,QAAQ,EAAE;AACnB"}},
    {"offset": {"line": 80, "column": 0}, "map": {"version":3,"sources":["file:///D:/Corominas-Seo-Reporting-System/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\r\nimport { twMerge } from 'tailwind-merge'\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs))\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACtB"}},
    {"offset": {"line": 95, "column": 0}, "map": {"version":3,"sources":["file:///D:/Corominas-Seo-Reporting-System/components/ui/card.tsx"],"sourcesContent":["import * as React from 'react'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nfunction Card({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card\"\r\n      className={cn(\r\n        'bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardHeader({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-header\"\r\n      className={cn(\r\n        '@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardTitle({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-title\"\r\n      className={cn('leading-none font-semibold', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardDescription({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-description\"\r\n      className={cn('text-muted-foreground text-sm', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardAction({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-action\"\r\n      className={cn(\r\n        'col-start-2 row-span-2 row-start-1 self-start justify-self-end',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardContent({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-content\"\r\n      className={cn('px-6', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardFooter({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-footer\"\r\n      className={cn('flex items-center px-6 [.border-t]:pt-6', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport {\r\n  Card,\r\n  CardHeader,\r\n  CardFooter,\r\n  CardTitle,\r\n  CardAction,\r\n  CardDescription,\r\n  CardContent,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 197, "column": 0}, "map": {"version":3,"sources":["file:///D:/Corominas-Seo-Reporting-System/components/datasources/datasources-list.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const DatasourcesList = registerClientReference(\n    function() { throw new Error(\"Attempted to call DatasourcesList() from the server but DatasourcesList is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/datasources/datasources-list.tsx <module evaluation>\",\n    \"DatasourcesList\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,kBAAkB,IAAA,wQAAuB,EAClD;IAAa,MAAM,IAAI,MAAM;AAA8O,GAC3Q,6EACA","ignoreList":[0]}},
    {"offset": {"line": 211, "column": 0}, "map": {"version":3,"sources":["file:///D:/Corominas-Seo-Reporting-System/components/datasources/datasources-list.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const DatasourcesList = registerClientReference(\n    function() { throw new Error(\"Attempted to call DatasourcesList() from the server but DatasourcesList is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/datasources/datasources-list.tsx\",\n    \"DatasourcesList\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,kBAAkB,IAAA,wQAAuB,EAClD;IAAa,MAAM,IAAI,MAAM;AAA8O,GAC3Q,yDACA","ignoreList":[0]}},
    {"offset": {"line": 225, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 233, "column": 0}, "map": {"version":3,"sources":["file:///D:/Corominas-Seo-Reporting-System/components/datasources/create-datasource-dialog.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const CreateDatasourceDialog = registerClientReference(\n    function() { throw new Error(\"Attempted to call CreateDatasourceDialog() from the server but CreateDatasourceDialog is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/datasources/create-datasource-dialog.tsx <module evaluation>\",\n    \"CreateDatasourceDialog\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,yBAAyB,IAAA,wQAAuB,EACzD;IAAa,MAAM,IAAI,MAAM;AAA4P,GACzR,qFACA","ignoreList":[0]}},
    {"offset": {"line": 247, "column": 0}, "map": {"version":3,"sources":["file:///D:/Corominas-Seo-Reporting-System/components/datasources/create-datasource-dialog.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const CreateDatasourceDialog = registerClientReference(\n    function() { throw new Error(\"Attempted to call CreateDatasourceDialog() from the server but CreateDatasourceDialog is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/datasources/create-datasource-dialog.tsx\",\n    \"CreateDatasourceDialog\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,yBAAyB,IAAA,wQAAuB,EACzD;IAAa,MAAM,IAAI,MAAM;AAA4P,GACzR,iEACA","ignoreList":[0]}},
    {"offset": {"line": 261, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 269, "column": 0}, "map": {"version":3,"sources":["file:///D:/Corominas-Seo-Reporting-System/app/dashboard/customers/%5Bid%5D/page.tsx"],"sourcesContent":["import { getCustomer } from \"@/lib/db/customers\"\r\nimport { getDatasources } from \"@/lib/db/datasources\"\r\nimport { notFound } from \"next/navigation\"\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\r\nimport { DatasourcesList } from \"@/components/datasources/datasources-list\"\r\nimport { CreateDatasourceDialog } from \"@/components/datasources/create-datasource-dialog\"\r\n\r\ninterface CustomerDetailPageProps {\r\n  params: Promise<{ id: string }>\r\n}\r\n\r\nexport async function generateMetadata({ params }: CustomerDetailPageProps) {\r\n  const { id } = await params\r\n  const customer = await getCustomer(id)\r\n\r\n  return {\r\n    title: customer ? `${customer.name} - Dashboard` : \"Customer - Dashboard\",\r\n  }\r\n}\r\n\r\nexport default async function CustomerDetailPage({ params }: CustomerDetailPageProps) {\r\n  const { id } = await params\r\n  const customer = await getCustomer(id)\r\n\r\n  if (!customer) {\r\n    notFound()\r\n  }\r\n\r\n  const datasources = await getDatasources(id)\r\n\r\n  return (\r\n    <div className=\"space-y-6 p-8\">\r\n      <div>\r\n        <h1 className=\"text-3xl font-bold text-foreground\">{customer.name}</h1>\r\n        <p className=\"text-muted-foreground\">{customer.email}</p>\r\n      </div>\r\n\r\n      <Card>\r\n        <CardHeader className=\"flex flex-row items-center justify-between\">\r\n          <div>\r\n            <CardTitle>Data Sources</CardTitle>\r\n            <CardDescription>Manage SEO data sources for this customer</CardDescription>\r\n          </div>\r\n          <CreateDatasourceDialog customerId={id} />\r\n        </CardHeader>\r\n        <CardContent>\r\n          <DatasourcesList datasources={datasources} customerId={id} />\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;;;;;;;;AAMO,eAAe,iBAAiB,EAAE,MAAM,EAA2B;IACxE,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM;IACrB,MAAM,WAAW,MAAM,IAAA,qIAAW,EAAC;IAEnC,OAAO;QACL,OAAO,WAAW,GAAG,SAAS,IAAI,CAAC,YAAY,CAAC,GAAG;IACrD;AACF;AAEe,eAAe,mBAAmB,EAAE,MAAM,EAA2B;IAClF,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM;IACrB,MAAM,WAAW,MAAM,IAAA,qIAAW,EAAC;IAEnC,IAAI,CAAC,UAAU;QACb,IAAA,iMAAQ;IACV;IAEA,MAAM,cAAc,MAAM,IAAA,0IAAc,EAAC;IAEzC,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;;kCACC,8OAAC;wBAAG,WAAU;kCAAsC,SAAS,IAAI;;;;;;kCACjE,8OAAC;wBAAE,WAAU;kCAAyB,SAAS,KAAK;;;;;;;;;;;;0BAGtD,8OAAC,iIAAI;;kCACH,8OAAC,uIAAU;wBAAC,WAAU;;0CACpB,8OAAC;;kDACC,8OAAC,sIAAS;kDAAC;;;;;;kDACX,8OAAC,4IAAe;kDAAC;;;;;;;;;;;;0CAEnB,8OAAC,sLAAsB;gCAAC,YAAY;;;;;;;;;;;;kCAEtC,8OAAC,wIAAW;kCACV,cAAA,8OAAC,oKAAe;4BAAC,aAAa;4BAAa,YAAY;;;;;;;;;;;;;;;;;;;;;;;AAKjE"}}]
}